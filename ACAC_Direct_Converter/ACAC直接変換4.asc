Version 4
SHEET 1 880 740
WIRE -1840 -1424 -1840 -1488
WIRE -1680 -1424 -1680 -1488
WIRE -1504 -1424 -1504 -1488
WIRE -1680 -1312 -1680 -1344
WIRE -1504 -1312 -1504 -1344
WIRE -1840 -1296 -1840 -1344
WIRE -1216 -1168 -1216 -1280
WIRE -1824 -1072 -1824 -1152
WIRE -2064 -1056 -2128 -1056
WIRE -1952 -1056 -2000 -1056
WIRE -1904 -1056 -1952 -1056
WIRE -1856 -1056 -1888 -1056
WIRE -1488 -1056 -1488 -1152
WIRE -1760 -1040 -1792 -1040
WIRE -1696 -1040 -1760 -1040
WIRE -1520 -1040 -1552 -1040
WIRE -1216 -1040 -1216 -1104
WIRE -1168 -1040 -1216 -1040
WIRE -1904 -1024 -1904 -1056
WIRE -1856 -1024 -1904 -1024
WIRE -1328 -1024 -1456 -1024
WIRE -1216 -1024 -1216 -1040
WIRE -1216 -1024 -1248 -1024
WIRE -1616 -1008 -1616 -1040
WIRE -1520 -1008 -1616 -1008
WIRE -1216 -1008 -1216 -1024
WIRE -1168 -1008 -1216 -1008
WIRE -1024 -1008 -1104 -1008
WIRE -1552 -976 -1552 -1040
WIRE -1552 -976 -1616 -976
WIRE -1888 -944 -1888 -1056
WIRE -1760 -944 -1760 -1040
WIRE -1760 -944 -1888 -944
WIRE -1552 -944 -1552 -976
WIRE -1488 -944 -1488 -992
WIRE -1216 -944 -1216 -1008
WIRE -1824 -928 -1824 -1008
WIRE -1952 -864 -1952 -976
WIRE -1904 -864 -1952 -864
WIRE -1616 -864 -1616 -976
WIRE -1616 -864 -1904 -864
WIRE -1216 -864 -1216 -880
WIRE -1216 -864 -1616 -864
WIRE -1952 -832 -1952 -864
WIRE -1216 -832 -1216 -864
WIRE -2128 -768 -2128 -1056
WIRE -192 -768 -2128 -768
WIRE -768 -736 -1168 -736
WIRE -640 -736 -768 -736
WIRE -640 -704 -640 -736
WIRE -400 -688 -512 -688
WIRE -192 -688 -192 -768
WIRE -192 -688 -320 -688
WIRE -768 -672 -768 -736
WIRE -768 -672 -944 -672
WIRE -768 -656 -768 -672
WIRE -512 -640 -512 -688
WIRE -368 -640 -512 -640
WIRE -512 -624 -512 -640
WIRE -832 -608 -864 -608
WIRE -368 -608 -368 -640
WIRE -1168 -592 -1168 -736
WIRE -576 -592 -608 -592
WIRE -1056 -544 -1072 -544
WIRE -944 -544 -944 -592
WIRE -864 -544 -864 -608
WIRE -768 -544 -768 -560
WIRE -672 -544 -672 -592
WIRE -672 -544 -768 -544
WIRE -576 -544 -576 -592
WIRE -576 -544 -592 -544
WIRE -768 -528 -768 -544
WIRE -1392 -512 -1632 -512
WIRE -1168 -512 -1200 -512
WIRE -512 -512 -512 -528
WIRE -368 -512 -368 -544
WIRE -368 -512 -512 -512
WIRE -192 -512 -192 -688
WIRE -944 -496 -944 -544
WIRE -864 -480 -864 -544
WIRE -832 -480 -864 -480
WIRE -640 -480 -640 -624
WIRE -640 -480 -704 -480
WIRE -512 -480 -512 -512
WIRE -512 -480 -640 -480
WIRE -560 -464 -560 -544
WIRE -560 -464 -592 -464
WIRE -512 -464 -512 -480
WIRE -368 -464 -512 -464
WIRE -1168 -448 -1168 -512
WIRE -1136 -448 -1136 -544
WIRE -1136 -448 -1168 -448
WIRE -1056 -448 -1056 -544
WIRE -1008 -448 -1056 -448
WIRE -512 -448 -512 -464
WIRE -592 -432 -592 -464
WIRE -576 -432 -576 -544
WIRE -560 -432 -576 -432
WIRE -368 -432 -368 -464
WIRE -1392 -416 -1440 -416
WIRE -1136 -416 -1200 -416
WIRE -672 -400 -672 -432
WIRE -592 -400 -592 -432
WIRE -592 -400 -608 -400
WIRE -192 -400 -192 -432
WIRE -80 -400 -192 -400
WIRE -1056 -384 -1056 -448
WIRE -944 -384 -944 -400
WIRE -944 -384 -992 -384
WIRE -896 -384 -944 -384
WIRE -768 -384 -768 -432
WIRE -768 -384 -896 -384
WIRE -704 -384 -704 -480
WIRE -704 -384 -768 -384
WIRE -640 -384 -704 -384
WIRE -192 -384 -192 -400
WIRE -80 -384 -80 -400
WIRE -1824 -368 -2256 -368
WIRE -1760 -368 -1824 -368
WIRE -1136 -336 -1136 -416
WIRE -896 -336 -896 -384
WIRE -896 -336 -1136 -336
WIRE -512 -336 -512 -352
WIRE -368 -336 -368 -368
WIRE -368 -336 -512 -336
WIRE -1824 -320 -1824 -368
WIRE -1904 -304 -1904 -864
WIRE -1872 -304 -1904 -304
WIRE -768 -288 -1168 -288
WIRE -576 -288 -768 -288
WIRE -2256 -272 -2256 -368
WIRE -768 -272 -768 -288
WIRE -768 -272 -944 -272
WIRE -1872 -256 -2016 -256
WIRE -768 -256 -768 -272
WIRE -1632 -240 -1632 -512
WIRE -1632 -240 -1824 -240
WIRE -576 -240 -576 -288
WIRE -512 -224 -512 -336
WIRE -192 -224 -192 -304
WIRE -192 -224 -512 -224
WIRE -1760 -208 -1760 -368
WIRE -1760 -208 -1824 -208
WIRE -832 -208 -864 -208
WIRE -2256 -192 -2400 -192
WIRE -1168 -192 -1168 -288
WIRE -1824 -176 -1824 -208
WIRE -2256 -160 -2256 -192
WIRE -1904 -160 -1904 -304
WIRE -1872 -160 -1904 -160
WIRE -640 -160 -640 -384
WIRE -576 -160 -640 -160
WIRE -1056 -144 -1072 -144
WIRE -944 -144 -944 -192
WIRE -864 -144 -864 -208
WIRE -768 -144 -768 -160
WIRE -672 -144 -672 -400
WIRE -672 -144 -768 -144
WIRE -768 -128 -768 -144
WIRE -1872 -112 -2016 -112
WIRE -1392 -112 -1536 -112
WIRE -1168 -112 -1200 -112
WIRE -944 -96 -944 -144
WIRE -1824 -80 -1824 -96
WIRE -1536 -80 -1536 -112
WIRE -1536 -80 -1824 -80
WIRE -864 -80 -864 -144
WIRE -832 -80 -864 -80
WIRE -1168 -48 -1168 -112
WIRE -1136 -48 -1136 -144
WIRE -1136 -48 -1168 -48
WIRE -1056 -48 -1056 -144
WIRE -1008 -48 -1056 -48
WIRE -1440 -16 -1440 -416
WIRE -1392 -16 -1440 -16
WIRE -1136 -16 -1200 -16
WIRE -1056 16 -1056 -48
WIRE -944 16 -944 0
WIRE -944 16 -992 16
WIRE -912 16 -944 16
WIRE -768 16 -768 -32
WIRE -768 16 -912 16
WIRE -640 16 -640 -160
WIRE -640 16 -768 16
WIRE -2400 64 -2400 -192
WIRE -1440 64 -1440 -16
WIRE -1440 64 -2400 64
WIRE -1136 64 -1136 -16
WIRE -912 64 -912 16
WIRE -912 64 -1136 64
WIRE -1440 80 -1440 64
FLAG -1952 -832 0
FLAG -1552 -944 0
FLAG -1216 -832 0
FLAG -1680 -1312 0
FLAG -1504 -1312 0
FLAG -1504 -1488 5v
IOPIN -1504 -1488 Out
FLAG -1216 -1280 5v
IOPIN -1216 -1280 Out
FLAG -1680 -1488 12v
IOPIN -1680 -1488 Out
FLAG -1824 -1152 12v
IOPIN -1824 -1152 In
FLAG -1488 -1152 12v
IOPIN -1488 -1152 In
FLAG -1840 -1488 -12v
IOPIN -1840 -1488 Out
FLAG -1840 -1296 0
FLAG -1824 -928 -12v
IOPIN -1824 -928 In
FLAG -1488 -944 -12v
IOPIN -1488 -944 In
FLAG -1024 -1008 ZC
FLAG -2016 -112 ZC
FLAG -2016 -256 ZC
FLAG -2256 -160 0
FLAG -1440 80 0
FLAG -80 -384 0
SYMBOL nmos -560 -624 R0
SYMATTR InstName M1
SYMATTR Value IPB107N20N3
SYMBOL nmos -560 -352 M180
SYMATTR InstName M2
SYMATTR Value IPI110N20N3
SYMBOL diode -352 -544 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D1
SYMATTR Value MURS320
SYMBOL diode -384 -432 R0
SYMATTR InstName D2
SYMATTR Value MURS320
SYMBOL res -576 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 25
SYMBOL res -576 -448 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 25
SYMBOL pnp -832 -528 R0
SYMATTR InstName Q1
SYMATTR Value 2SA2029
SYMBOL npn -832 -656 R0
SYMATTR InstName Q2
SYMATTR Value 2SC5658
SYMBOL res -848 -560 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R5
SYMATTR Value 100
SYMBOL res -960 -688 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res -1040 -464 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R4
SYMATTR Value 1k
SYMBOL npn -1008 -496 R0
SYMATTR InstName Q3
SYMATTR Value 2SC5658
SYMBOL diode -992 -400 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL cap -1072 -560 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 0.0047u
SYMBOL voltage -2256 -288 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value PULSE(0 3 0 0.0001m 0.0001m 0.02m 0.04m)
SYMBOL voltage -192 -528 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -80 109 Left 2
SYMATTR InstName V4
SYMATTR Value SINE(0 50 50)
SYMBOL pnp -832 -128 R0
SYMATTR InstName Q4
SYMATTR Value 2SA2029
SYMBOL npn -832 -256 R0
SYMATTR InstName Q5
SYMATTR Value 2SC5658
SYMBOL res -848 -160 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 100
SYMBOL res -960 -288 R0
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL res -1040 -64 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R8
SYMATTR Value 1k
SYMBOL npn -1008 -96 R0
SYMATTR InstName Q6
SYMATTR Value 2SC5658
SYMBOL diode -992 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL cap -1072 -160 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C2
SYMATTR Value 0.0047u
SYMBOL res -1968 -1072 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL res -1600 -1056 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R10
SYMATTR Value 5.6k
SYMBOL polcap -2064 -1040 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName C4
SYMATTR Value 100u
SYMBOL voltage -1680 -1440 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V3
SYMATTR Value 12
SYMBOL voltage -1504 -1440 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V6
SYMATTR Value 5
SYMBOL res -1232 -1040 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 5.6k
SYMBOL Digital\\and -1136 -1088 R0
WINDOW 3 16 52 Left 2
SYMATTR Value Vhigh=6
SYMATTR InstName A1
SYMBOL voltage -1840 -1440 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V7
SYMATTR Value -12
SYMBOL Opamps\\LT1225 -1488 -1088 R0
SYMATTR InstName U3
SYMBOL Opamps\\ADA4625-1 -1824 -1104 R0
SYMATTR InstName U4
SYMBOL diode -1200 -1104 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D5
SYMBOL diode -1200 -880 R180
WINDOW 0 24 64 Left 2
WINDOW 3 24 0 Left 2
SYMATTR InstName D6
SYMBOL sw -1824 -336 R0
SYMATTR InstName S1
SYMATTR Value trsw
SYMBOL sw -1824 -192 R0
SYMATTR InstName S2
SYMATTR Value trsw2
SYMBOL Optos\\PC817C -1296 -464 R0
SYMATTR InstName U1
SYMBOL Optos\\PC817C -1296 -64 R0
SYMATTR InstName U2
SYMBOL res -1184 -608 R0
SYMATTR InstName R12
SYMATTR Value 330
SYMBOL res -1184 -208 R0
SYMATTR InstName R13
SYMATTR Value 330
SYMBOL Misc\\battery -640 -720 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V8
SYMATTR Value 12
SYMBOL Misc\\battery -576 -256 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -192 -400 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 -80 109 Left 2
SYMATTR InstName V9
SYMATTR Value SINE(0 50 50)
SYMBOL schottky -608 -608 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D7
SYMBOL schottky -608 -416 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName D8
SYMBOL res -304 -704 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R14
SYMATTR Value 1k
TEXT -1232 376 Left 2 !.tran 50m
TEXT -2072 208 Left 2 !.Model trsw SW(Ron=10m Roff=10000meg Vt=5)
TEXT -2072 256 Left 2 !.Model trsw2 SW(Ron=1000000meg Roff=10m Vt=5)
